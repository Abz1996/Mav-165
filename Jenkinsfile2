pipeline {
    agent any 
    tools {
        maven 'M2_HOME'
    }
    environment {
        SONAR_SCANNER_VERSION = '5.0.1.3006' // Replace with your SonarQube Scanner version
        JAVA_HOME = tool 'JDK11' // Replace 'JDK8' with the name of your JDK tool installation
      PATH = "/usr/lib/jvm/java-11-amazon-corretto.x86_64"
    }
    stages{
        stage('sonarqube scan'){
           
            steps{
                withSonarQubeEnv('Sonarserver'){ 
              sh 'mvn verify org.sonarsource.scanner.maven:sonar-maven-plugin:sonar -Dsonar.projectKey=Abz1996_Mav-165'
              
            }
            }
        }
        stage('all maven commands'){
            steps{
                sh 'mvn clean test compile install package'
            }
        }
        
        
    }
}