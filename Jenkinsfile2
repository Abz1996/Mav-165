pipeline {
    agent any 
    tools {
        maven 'M2_HOME'
    }
    environment {
        SONAR_SCANNER_VERSION = '5.0.1.3006' // Replace with your SonarQube Scanner version
        JDK_TOOL_NAME = 'JDK11_0_22' // Custom tool name for Java 11.0.22
        JAVA_HOME = tool JDK_TOOL_NAME
        PATH = "/usr/lib/jvm/java-11-amazon-corretto.x86_64"
    
    }
    stages{
        stage('sonarqube scan'){
           
            steps{
                withSonarQubeEnv('Sonarserver'){ 
              sh 'mvn verify org.sonarsource.scanner.maven:sonar-maven-plugin:sonar -Dsonar.projectKey=Abz1996_Mav-165'
              
            }
            }
        }
        stage('all maven commands'){
            steps{
                sh 'mvn clean test compile install package'
            }
        }
        
        
    }
}